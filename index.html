<html>
	<head>
		<title>Schwarz Hochzeitsfotografen</title>
		<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
		<script src="https://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
	</head>
	<body>
		<h1> Willkommen </h1>
		<img id="viewer" src="" width="800px"/>
		<div id="info"> </div>
		<script>
			$(function() {
				var baseUrl = "https://madf0x.github.io/schwarz.cam/portfolio/";
				var pictureIndex = 0;
				var pictures = [];
				jQuery.ajaxSetup({async:false});

				function getImages()
				{
				  $.get(baseUrl + 'index', function(data) {
				    pictures = data.split(/\r?\n/).filter(e => e.trim() != '');
				  }, 'text');
				}

				function changePicture(indexOffset) {
				  pictureIndex += indexOffset;
				  if (pictureIndex >= pictures.length) {
				    pictureIndex = 0;
				  } else if (pictureIndex < 0) {
				    pictureIndex = pictures.length - 1;
				  }
				  $('#viewer').attr('src', baseUrl + pictures[pictureIndex]);
				  $('#info').text((pictureIndex + 1) + "/" + pictures.length);
				}
				getImages();
        			changePicture(0);
				$(document).keydown(function(e){
				  var left = -1, right = 1;
				  if (e.keyCode == 37) {
				    changePicture(left); return false;
				  } else if (e.keyCode == 39) {
				    changePicture(right); return false;
				  }
				});
			});
		</script>
	</body>
</html>
